# ScbWind2022-Service

Личный финансовый кабинет

### Задача
1. Ролевая модель (пользователь и администратор, необходимые интерфейсы для каждой роли)
2. Функционал регистрации новых пользователей (в рамках процесса регистрации создается первый рублевый счет для торговли)
3. Функционал подтверждения регистрации для администратора приложения
4. Функционал для блокировки/разблокировки пользователей
5. Функционал для пополнения и выведения средств с рублевого счета
6. Функционал открытия нового счета для проведения операций над выбранной пользователем валютой
7. Отражение сводной информации по имеющимся в портфеле пользователя активам. Состав представленной информации должен быть обоснован
8. Отображение исторической информации о движении валюты (отчет по сделанным операциям)
9. Отображение общей информации о пользователе приложения в удобном и понятном для пользователя виде (профиль текущего пользователя), в т.ч., и информация о реквизитах счетов, с которых совершаются операции над валютами.
10. Функционал торговли, возможность покупать и продавать валюту по рыночному курсу (курс из внешнего источника)
11. Визуализация графика стоимости валюты/валют за период (график изменения стоимости)
12. Расчет и визуализация прогнозной стоимости валют (технический анализ, регрессионные модели, ML и т.д)

### Используемые технологии
* Java 11
* Spring Boot, 
* Spring Cloud, OpenFeign
* Microservices
* REST
* gRpc
* PostgreSQL
* Caffeine
* Lombok

### Идея решения
* Проектирование backend интерфейса 
по спецификации OpenApi [api-doc.yml](gateway/src/main/resources/static/api-doc.yml) 
* Frontend взаимодействует с backend по REST API.
* Используется микросервисная архитектура. 
Микросервисы взаимодействуют по протоколу gRpc.
* Для уменьшения количества запросов к провайдеру курсов валют 
используется кэш со временем жизни 1 секунда.
* При совершении торговых операций данные о счетах пользователя сохраняются в памяти.
В решении используется коллекция ConcurrentHashMap.
Для промышленного решения предполагается использование Hazelcast или Apache Ignite. 
* Для долговременного хранения данных используется СУБД PostgreSQL.

### Состав микросервисов
**gateway** шлюз, представляет интерфейс backend-а 

**discovery-service** discovery сервис, отвечает за поиск других сервисов

**auth-service** сервис авторизации

**user-service** сервис обслуживает операции с пользователями и их счетами,
хранит данные в СУБД PostgeSQL.

**rate-service** сервис отвечает за получение курсов валют 
и проведение торговых операций.

### Ролевая модель

**admin** администратор системы

**user** пользователь системы

### Frontend

ссылка на репозиторий [frontend-а](https://github.com/ScbWind2022/ScbWind2022-Front)
